<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />

{% load staticfiles %}

<link href="{% static 'attendance/fullcalendar.css' %}" rel='stylesheet' />
<link href='{% static 'attendance/fullcalendar.print.css' %}' rel='stylesheet' media='print' />
<script src='{% static 'attendance/lib/moment.min.js' %}'></script>
<script src='{% static 'attendance/lib/jquery.min.js' %}'></script>
<script src='{% static 'attendance/fullcalendar.min.js' %}'></script>
{% block main %}
<script>

	$(document).ready(function() {
     $('#contact').click(function() {
      $('#popup').slideToggle("fast");
    });
    $('#popup').click(function(){
      $(this).slideToggle("fast");
    });  

		$('#calendar').fullCalendar({
			header: {
				left: '',
				center: 'title',
				right: ''
			},
			//defaultDate: '2015-01-01',
			editable: false,
			eventLimit: true, // allow "more" link when too many events
			events: [
      {% for date_iterator in dates %}
        {
          title: 'Present',
          start: '{{date_iterator}}'
        },
      {% endfor %}
      {% for date_iterator in positive_exceptions %}
        {
          title: 'Holiday',
          start: '{{date_iterator}}',
          color: '#d86b6b'
        },
      {% endfor %}
      {% for date_iterator in negative_exceptions %}
        {
          title: 'Working',
          start: '{{date_iterator}}',
          color: '#d86b6b',
        },
      {% endfor %}

			]
		});
    $('.fc-sat').css('background','#a3c98e');
    $('.fc-sun').css('background','#a3c98e');
    {% for date_iterator in dates %}

  	  $('.fc-day[data-date="' + '{{date_iterator}}' + '"]').css('background', '#3a87ad');	
    {% endfor %}
    {% for date_iterator in positive_exceptions %}
  	  $('.fc-day[data-date="' + '{{date_iterator}}' + '"]').css('background', '#d86b6b');	
    {% endfor %}


	});

</script>
<style>

	body {
		margin: 0;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}
  #all-container{
    min-width:1000px;
    margin-left:50px;
    margin-right:50px;
    margin-bottom:50px;
    margin-top:0px;
/*    background-color:red;*/
  }
  .nav-element{
    min-width:200px;
    width:300px;
    height:50px;
    border:0px solid black;
    border-top:0px;
    border-bottom:0px;
    display:inline-block;
    vertical-align:middle;
    font-size:17px;
    line-height:50px;
    color:#3a87ad;
  }
  .highlight:hover{
    cursor:pointer;
    color:orange;
  }
  #nav-bar{
    width:100%;
    min-width:100%;
    height:50px;
/*    background-color:orange;*/
    border: 2px solid #3a87ad;
/*    border-bottom:0px;*/
    border-left:0px;
    border-right:0px;
    text-align:center;
 /*   line-height:50px;*/
  }
	#calendar {
		max-width: 900px;
		margin: 0 auto;
    border: 2px solid #3a87ad;
    border-top:0px;
	}
  #header{
 		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 35px;
    height:50px;
    width:100%;
    text-align:center;
/*    color:#3a87ad;*/
  }
  a{
    text-decoration:none;
    color:inherit;
  }
</style>
</head>
<body>
  <div id='header'>
  Attendance
  </div>
  <div id='all-container'>
    <div id='nav-bar'>
      <!-- Show list of user devices -->
      <div class='nav-element'>Roll No:{{ info.rollno|upper }}</div>
      <div class='nav-element'>Macs:{% for mac in info.macs %}
      {{ mac }}
      {% endfor %}
      </div>
      <div class='nav-element highlight'>
      {% if user and not user.is_anonymous %}
      <a href="{% url 'auth:logout' %}?next={{ request.path }}">Logout</a>
      {% else %}
      <a href = "{% url 'social:begin' 'google-oauth2' %}?next={{ request.path }}">Login
      </a>
      {% endif %}
      </div>
 </div>
  	<div id='calendar'>
    </div>
  </div>
{% endblock %}
</body>
</html>
